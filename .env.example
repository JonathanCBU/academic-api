# =============================================================================
# Academic Data Collection API - Environment Configuration
# =============================================================================
# Copy this file to .env and configure for your environment
# DO NOT commit .env to version control!

# =============================================================================
# Application Settings
# =============================================================================

# Environment (development, staging, production)
ENV=development

# Server port
PORT=8080

# Server host (0.0.0.0 for Docker, localhost for local dev)
HOST=127.0.0.1

# API version prefix (e.g., /api/v1)
API_VERSION=v1

# Application name (used in logs)
APP_NAME=academic-api

# Server timeout in seconds
SHUTDOWN_TIMEOUT=30


# =============================================================================
# Database Configuration
# =============================================================================

# SQLite database file path
DB_PATH=./data/academic_data.db

# Database connection pool settings
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=300  # seconds

# Enable foreign key constraints (recommended: true)
DB_FOREIGN_KEYS=true

# Enable WAL mode for better concurrency (recommended: true)
DB_WAL_MODE=true

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Log output (stdout, file, both)
LOG_OUTPUT=stdout

# Log file path (if LOG_OUTPUT is file or both)
LOG_FILE=./logs/app.log

# Enable request logging
LOG_REQUESTS=true

# =============================================================================
# API Configuration
# =============================================================================

# Enable CORS
CORS_ENABLED=true

# CORS allowed origins (comma-separated, * for all)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# CORS allowed methods
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS

# CORS allowed headers
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# CORS allow credentials
CORS_ALLOW_CREDENTIALS=true

# Request timeout (seconds)
REQUEST_TIMEOUT=30

# Max request body size (bytes, 10MB default)
MAX_BODY_SIZE=10485760

# =============================================================================
# Pagination Defaults
# =============================================================================

# Default page size for list endpoints
DEFAULT_PAGE_SIZE=50

# Maximum page size allowed
MAX_PAGE_SIZE=100

# =============================================================================
# Rate Limiting (Future Implementation)
# =============================================================================

# Enable rate limiting
RATE_LIMIT_ENABLED=false

# Requests per minute per IP
RATE_LIMIT_REQUESTS=60

# Rate limit window (minutes)
RATE_LIMIT_WINDOW=1

# =============================================================================
# Authentication & Security (Future Implementation)
# =============================================================================

# Enable API key authentication
AUTH_ENABLED=false

# JWT secret key (generate with: openssl rand -base64 32)
JWT_SECRET=your-secret-key-here-change-in-production

# JWT token expiration (hours)
JWT_EXPIRATION=24

# API keys (comma-separated, format: name:key)
API_KEYS=scraper:your-scraper-api-key,admin:your-admin-api-key

# Enable HTTPS redirect
FORCE_HTTPS=false

# =============================================================================
# Data Collection Settings
# =============================================================================

# Default academic year for reports
DEFAULT_ACADEMIC_YEAR=2024

# Data collection user identifier (for tracking)
COLLECTOR_ID=default-collector

# Scraper timeout (seconds)
SCRAPER_TIMEOUT=60

# Scraper retry attempts
SCRAPER_RETRY_ATTEMPTS=3

# Scraper user agent
SCRAPER_USER_AGENT=Academic-Data-Collector/1.0

# =============================================================================
# Export Configuration
# =============================================================================

# CSV export encoding (utf-8, iso-8859-1)
CSV_ENCODING=utf-8

# CSV delimiter
CSV_DELIMITER=,

# Include headers in CSV export
CSV_INCLUDE_HEADERS=true

# Temporary export directory
EXPORT_DIR=./tmp/exports

# Export file retention (hours, 0 for no cleanup)
EXPORT_RETENTION=24

# =============================================================================
# Backup Configuration
# =============================================================================

# Automatic backup enabled
AUTO_BACKUP_ENABLED=false

# Backup schedule (cron format, daily at 2 AM)
BACKUP_SCHEDULE=0 2 * * *

# Backup retention days
BACKUP_RETENTION_DAYS=30

# Backup directory
BACKUP_DIR=./backups

# =============================================================================
# Development Settings
# =============================================================================

# Enable debug mode (verbose logging, detailed errors)
DEBUG=true

# Enable hot reload (if using air)
HOT_RELOAD=true

# Enable SQL query logging
LOG_SQL_QUERIES=true

# Enable profiling endpoint (DO NOT enable in production)
PROFILING_ENABLED=false

# Mock external services for testing
MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# Feature Flags
# =============================================================================

# Enable experimental features
EXPERIMENTAL_FEATURES=false

# Enable bulk import endpoint
FEATURE_BULK_IMPORT=true

# Enable CSV export
FEATURE_CSV_EXPORT=true

# Enable data validation
FEATURE_DATA_VALIDATION=true

# Enable collection progress tracking
FEATURE_PROGRESS_TRACKING=true

# =============================================================================
# Docker-Specific Settings
# =============================================================================

# Container timezone
TZ=America/New_York

# Enable container health checks
HEALTH_CHECK_INTERVAL=30

# Container restart policy (no, on-failure, always, unless-stopped)
RESTART_POLICY=unless-stopped

# =============================================================================
# Migration Settings
# =============================================================================

# Migrations directory
MIGRATIONS_DIR=./migrations

# Auto-run migrations on startup (useful for Docker)
AUTO_MIGRATE=true

# Migration lock timeout (seconds)
MIGRATION_LOCK_TIMEOUT=10
