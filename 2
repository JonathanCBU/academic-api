package handler

import (
	"academic-api/internal/middleware"
	"net/http"

	"github.com/gorilla/mux"
)

func (r *Router) GetRouteHandler() (http.Handler, error) {
	router := mux.NewRouter().StrictSlash(true)

	// health-check
	router.
		Path(healthCheckPath).
		Name(healthCheckName).
		Methods(http.MethodPost).
		HandlerFunc(r.contoller.HandleHealthCheck)

	// schoools
	router.
		Path(schoolsPath).
		Name(schoolsPathName).
		Methods(http.MethodPost).
		HandlerFunc(r.contoller.HandleGetSchools)

	//stats
	// router.
	// 	Path(statsPath).
	// 	Name(statsPathName).
	// 	Methods(http.MethodPost).
	// 	HandlerFunc(r.contoller.HandleGetStats)

	router.Use(r.auth.GetMiddleware())

	return router, nil
}
